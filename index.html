<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Super Neon Jumper</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script>
  // === Basic Scene Setup ===
  const scene = new THREE.Scene();
  scene.background = new THREE.Color("#111133");

  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(0, 5, 10);

  const renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(10, 20, 10);
  scene.add(light);

  const ambientLight = new THREE.AmbientLight(0x404040);
  scene.add(ambientLight);

  // === Player ===
  const playerGeometry = new THREE.BoxGeometry(1, 1, 1);
  const playerMaterial = new THREE.MeshStandardMaterial({ color: 0x00ffcc });
  const player = new THREE.Mesh(playerGeometry, playerMaterial);
  player.position.y = 1;
  scene.add(player);

  // === Ground ===
  const groundGeometry = new THREE.BoxGeometry(50, 1, 50);
  const groundMaterial = new THREE.MeshStandardMaterial({ color: 0x444444 });
  const ground = new THREE.Mesh(groundGeometry, groundMaterial);
  ground.position.y = -0.5;
  scene.add(ground);

  // === Platforms ===
  const platforms = [];
  function createPlatform(x, y, z) {
    const geom = new THREE.BoxGeometry(4, 0.5, 4);
    const mat = new THREE.MeshStandardMaterial({ color: 0x2288ff });
    const mesh = new THREE.Mesh(geom, mat);
    mesh.position.set(x, y, z);
    scene.add(mesh);
    platforms.push(mesh);
  }

  // Scatter platforms like confetti ðŸŽ‰
  createPlatform(5, 2, 0);
  createPlatform(10, 4, -2);
  createPlatform(15, 6, 2);
  createPlatform(20, 8, 0);

  // === Enemies ===
  const enemies = [];
  function createEnemy(x, y, z) {
    const geom = new THREE.SphereGeometry(0.5, 16, 16);
    const mat = new THREE.MeshStandardMaterial({ color: 0xff3333 });
    const mesh = new THREE.Mesh(geom, mat);
    mesh.position.set(x, y, z);
    mesh.userData = { direction: 1 }; // move back and forth
    scene.add(mesh);
    enemies.push(mesh);
  }

  createEnemy(5, 2.5, 0);
  createEnemy(15, 6.5, 2);

  // === Power-Ups ===
  const powerUps = [];
  function createPowerUp(x, y, z) {
    const geom = new THREE.TetrahedronGeometry(0.4);
    const mat = new THREE.MeshStandardMaterial({ color: 0xffff00 });
    const mesh = new THREE.Mesh(geom, mat);
    mesh.position.set(x, y, z);
    scene.add(mesh);
    powerUps.push(mesh);
  }

  createPowerUp(10, 4.5, -2);

  // === Controls and Physics ===
  const keys = {};
  window.addEventListener('keydown', e => keys[e.key] = true);
  window.addEventListener('keyup', e => keys[e.key] = false);

  let velocityY = 0;
  let canJump = false;
  let speedBoost = 1;

  // === Game Loop ===
  function animate() {
    requestAnimationFrame(animate);

    // Move enemies
    enemies.forEach(enemy => {
      enemy.position.x += 0.02 * enemy.userData.direction;
      if (enemy.position.x > 6 || enemy.position.x < 4) {
        enemy.userData.direction *= -1;
      }

      // Collision with player
      const dist = enemy.position.distanceTo(player.position);
      if (dist < 1) {
        alert("Oof! You got bonked by a neon enemy! Game Over ðŸ’€");
        location.reload();
      }
    });

    // Player Movement
    let moveSpeed = 0.1 * speedBoost;
    if (keys['ArrowLeft']) player.position.x -= moveSpeed;
    if (keys['ArrowRight']) player.position.x += moveSpeed;
    if (keys['ArrowUp']) player.position.z -= moveSpeed;
    if (keys['ArrowDown']) player.position.z += moveSpeed;

    // Gravity
    velocityY -= 0.01;
    player.position.y += velocityY;

    // Landing on platforms
    let onPlatform = false;
    [...platforms, ground].forEach(p => {
      if (Math.abs(player.position.x - p.position.x) < 2.5 &&
          Math.abs(player.position.z - p.position.z) < 2.5 &&
          Math.abs(player.position.y - p.position.y) < 1 &&
          velocityY <= 0) {
        player.position.y = p.position.y + 0.75;
        velocityY = 0;
        canJump = true;
        onPlatform = true;
      }
    });

    if (!onPlatform) canJump = false;

    // Jump
    if (keys[' '] && canJump) {
      velocityY = 0.2 * speedBoost;
      canJump = false;
    }

    // Collect powerups
    for (let i = 0; i < powerUps.length; i++) {
      const pu = powerUps[i];
      if (pu && player.position.distanceTo(pu.position) < 1) {
        speedBoost = 2;
        scene.remove(pu);
        powerUps.splice(i, 1);
        setTimeout(() => speedBoost = 1, 5000);
        break;
      }
    }

    // Follow the player
    camera.position.x = player.position.x;
    camera.position.z = player.position.z + 10;
    camera.lookAt(player.position);

    renderer.render(scene, camera);
  }

  animate();
</script>
</body>
</html>
